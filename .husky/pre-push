#!/bin/sh

# Skip changeset check if pushing to main branch
current_branch=$(git rev-parse --abbrev-ref HEAD)
if [ "$current_branch" = "main" ]; then
  exit 0
fi

# Check for changeset files (excluding README.md and config.json)
changeset_files=$(find .changeset -name "*.md" ! -name "README.md" 2>/dev/null | head -1)

if [ -z "$changeset_files" ]; then
  echo ""
  echo "‚ùå No changeset found!"
  echo ""
  echo "Please run 'npx changeset' to create a changeset before pushing."
  echo "This documents your changes for the changelog."
  echo ""
  exit 1
fi

exit 0
